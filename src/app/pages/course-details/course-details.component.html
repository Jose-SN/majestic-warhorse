<div class="content-area">
  <div class="content-left">
    <div class="courses-wrapper">
      <div class="course-top">
        <h2>{{selectedCourseInfo.courseTitle}}</h2>
        <span>{{activeChapter.chapterTitle}}</span>
      </div>
      <div class="video-wrapper">
        <div class="video-holder">
          <div class="video-left">
            <!-- <figure><img src="../../../assets/images/img-video.png" alt="" /></figure> -->
            <app-video-player [videoUrl]="{url:activeVideoInfo.fileURL}" 
            (videoDuration)="videoDurationHandler($event)"
            (videoStatusUpdate)="videoStatusUpdateHandler($event)"></app-video-player>
            <div class="video-bottom">
              <div class="bottom-holder">
                <div class="profile">
                  <figure>
                    <img [src]="activeChapter?.createdBy?.profileImage" alt="" />
                  </figure>
                  <div class="profile-right">
                    <span>{{activeChapter?.createdBy?.firstName}} {{activeChapter?.createdBy?.lastName}}</span>
                    <strong>{{selectedCourseInfo?.chapterDetails?.length}}</strong>
                  </div>
                </div>
                <div class="time">
                  <figure>
                    <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18ZM11 10H15V12H9V5H11V10Z"
                        fill="" />
                    </svg>
                  </figure>
                  <span>{{videoDuration}}</span>
                </div>
                <div class="bookmark">
                  <figure>
                    <svg width="14" height="18" viewBox="0 0 14 18" fill="none"
                      xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M12.8337 16.5L7.00033 12.3333L1.16699 16.5V3.16667C1.16699 2.72464 1.34259 2.30072 1.65515 1.98816C1.96771 1.67559 2.39163 1.5 2.83366 1.5H11.167C11.609 1.5 12.0329 1.67559 12.3455 1.98816C12.6581 2.30072 12.8337 2.72464 12.8337 3.16667V16.5Z"
                        stroke="#FD7859" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </figure>
                  <span (click)="downloadMaterial('VIDEO')">Download video</span>
                </div>
                <div class="download">
                  <figure>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                      xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_387_625)">
                        <path d="M17.5 6.66675V17.5001H2.5V6.66675" stroke="#FD7859" stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M19.1663 2.5H0.833008V6.66667H19.1663V2.5Z" stroke="#FD7859" stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M8.33301 10H11.6663" stroke="#FD7859" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round" />
                      </g>
                      <defs>
                        <clipPath id="clip0_387_625">
                          <rect width="20" height="20" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </figure>
                  <span (click)="downloadMaterial('ATTACHMENT')">Download meterial</span>
                </div>
                <div class="rating">
                  <star-rating [hoverEnabled]="true"  (starClickChange)="updateVideoStatus($event)"
                    [rating]="videoRating"></star-rating>
                </div>                      
              </div>
              @if(loginedUserRole === 'student'){
                <div class="btn-holder">
                  <button (click)="handleStartAssessment()">Start Assessment Test</button>
                </div>
                }
            </div>
            <div class="content-bottom">
              <div class="scroll-content">
                <h5>About this course</h5>
                <strong>{{activeVideoDescription}}</strong>
                <p>
                  {{selectedCourseInfo.courseDescription}}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="content-right">
    <div class="content-box">
      <!-- <h3>Last Submitted</h3> -->
      <div class="reading-list-wrapper">
        <div class="reading-list-content">
          <div class="scroll-content">
            <div class="courses-list">
              <div class="course-list-holder">
                <div class="scroll-content accordion-content">
                  <ul>
                    @for (chapterDetails of selectedCourseInfo.chapterDetails; track $index) {
                    <li (click)="openAccordian($event,chapterDetails)"
                      [ngClass]="{'active': chapterDetails._id === activeChapter._id}">
                      <figure>
                        <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18ZM11 10H15V12H9V5H11V10Z"
                            fill="" />
                        </svg>
                      </figure>
                      <span>{{ chapterDetails.chapterTitle }}</span>
                      <strong>1:49</strong>
                    </li>
                    <div class="panel">
                      <div class="panel-content">
                        @for (item of chapterDetails.fileDetails; track $index) {
                        <div class="panel-list" (click)="changeVideoUrl(item)">
                          <p> {{item.description}}</p>
                        </div>
                        }
                      </div>
                    </div>
                    }
                  </ul>
                </div>
              </div>
            </div>
            <div class="courses-list">
            <div class="course-list-holder">
              <div class="scroll-content accordion-content">
                <ul>
                  @for (chapterDetails of selectedCourseInfo.chapterDetails; track $index) {
                  <li (click)="openAccordian($event,chapterDetails)"
                    [ngClass]="{'active': chapterDetails._id === activeChapter._id}">
                    <figure>
                      <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18ZM11 10H15V12H9V5H11V10Z"
                          fill="" />
                      </svg>
                    </figure>
                    <span>Attachments</span>
                  </li>
                  <div class="panel">
                    <div class="panel-content">
                      @for (item of chapterDetails.attachments; track $index) {
                      <div class="panel-list">
                        <p> {{item.name}}</p>
                        <ul>
                          <li (click)="previewDocument(item)">Preview</li>
                          <li (click)="downloadFile(item)">Download</li>
                        </ul>
                      </div>
                      }
                    </div>
                  </div>
                  }
                </ul>
              </div>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>