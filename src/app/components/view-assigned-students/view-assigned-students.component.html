<div class="common-container">
    <div class="common-wrapper">
        <div class="scoll-wrapper">
            <div class="scroll-container">
                <div class="common-list-wrapper">
                    @if (isLoading) {
                        <div class="loading-state">
                            <div class="spinner"></div>
                            <p>Loading assigned students...</p>
                        </div>
                    } @else if (assignedStudents.length === 0) {
                        <div class="no-students-found">
                            <figure>
                                <svg width="140" height="140" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" fill="currentColor" opacity="0.3"/>
                                    <path d="M12 14C16.4183 14 20 15.7909 20 18V20H4V18C4 15.7909 7.58172 14 12 14Z" fill="currentColor" opacity="0.3"/>
                                    <path d="M12 2C13.6569 2 15 3.34315 15 5C15 6.65685 13.6569 8 12 8C10.3431 8 9 6.65685 9 5C9 3.34315 10.3431 2 12 2Z" fill="currentColor"/>
                                    <path d="M12 10C15.866 10 19 11.3431 19 13V15H5V13C5 11.3431 8.13401 10 12 10Z" fill="currentColor"/>
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1" fill="none" opacity="0.2"/>
                                </svg>
                            </figure>
                            <h3>No Assigned Students</h3>
                            <p>This teacher doesn't have any assigned students yet.</p>
                            <p class="help-text">Students will appear here once they are assigned to this teacher.</p>
                        </div>
                    } @else {
                        @for (student of assignedStudents; track getStudentId(student) || $index) {
                            <div class="common-list">
                                <div class="list-left">
                                    <figure class="student-avatar">
                                        <img [src]="commonService.decodeUrl((student.profileImage || student.profile_image) ?? '')" alt="Student Avatar" />
                                    </figure>
                                    <div class="common-list-right">
                                        <h4>{{student.firstName || student.first_name}} {{student.lastName || student.last_name}}</h4>
                                        @if (student.contact?.email || student.email) {
                                            <span class="student-email">{{student.contact?.email || student.email}}</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>
